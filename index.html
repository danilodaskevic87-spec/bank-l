<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ—ñ—Å–æ–≤–∞ –ü—ñ—Å–Ω—è - Monobank Edition</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root { --bg: #010811; --card: #05111f; --green: #2ecc71; --white: #fff; --blue: #3498db; --purple: #9b59b6; --gold: #f1c40f; --red: #e74c3c; --mono: #ff4c4c; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--white); margin: 0; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 450px; padding: 20px; box-sizing: border-box; }
        .hidden { display: none !important; }
        #forest-playground {
    position: relative;
    width: 100%;
    min-height: 350px;
    background: url('https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1000') center/cover;
    border-radius: 15px;
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 15px;
    padding: 20px;
    box-sizing: border-box;
    border: 3px solid #22c55e;
}

.forest-obj {
    font-size: 35px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s, filter 0.2s;
    filter: drop-shadow(0 0 5px rgba(0,0,0,0.5));
}

.forest-obj:hover {
    transform: scale(1.4);
}

.forest-obj.found {
    pointer-events: none;
    filter: grayscale(1) opacity(0.5);
}
        .btn { width: 100%; padding: 16px; margin-bottom: 10px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; background: var(--green); color: #000; font-size: 16px; transition: 0.2s; }
        .btn:active { transform: scale(0.98); }
        .btn:disabled { background: #1e2d3d !important; color: #556677 !important; cursor: not-allowed; }
        .btn-blue { background: var(--blue) !important; color: white !important; }
        .btn-purple { background: var(--purple) !important; color: white !important; }
        .btn-mono { background: var(--mono) !important; color: white !important; }
        .btn-gray { background: #34495e !important; color: white !important; }
        .btn-small { width: auto; padding: 8px 12px; font-size: 12px; margin: 0; }
        .news-bar { background: linear-gradient(90deg, #1e2d3d, #05111f); padding: 12px; border-radius: 12px; border-left: 4px solid var(--gold); margin-bottom: 20px; font-size: 14px; }
        .user-card { background: var(--card); padding: 25px; border-radius: 20px; text-align: center; border: 1px solid #1e2d3d; margin-bottom: 20px; }
        .balance { font-size: 38px; color: var(--green); font-weight: bold; margin: 10px 0; }
        .rank-badge { font-size: 12px; color: var(--gold); text-transform: uppercase; margin-bottom: 5px; }
        .section-header { font-size: 18px; margin: 25px 0 15px; font-weight: bold; border-left: 4px solid var(--green); padding-left: 10px; display: flex; justify-content: space-between; align-items: center; }
        .service-row { display: flex; align-items: center; justify-content: space-between; background: #0d1b2a; padding: 10px; border-radius: 12px; margin-bottom: 8px; border: 1px solid #1e2d3d; }
        .modal { background: rgba(0,0,0,0.9); position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index: 100; }
        .modal-content { background: var(--card); padding: 25px; border-radius: 20px; width: 90%; max-width: 400px; border: 1px solid var(--green); max-height: 80vh; overflow-y: auto; }
        .cart-float { position: fixed; bottom: 20px; right: 20px; background: var(--green); color: black; padding: 15px; border-radius: 50%; box-shadow: 0 5px 15px rgba(0,0,0,0.5); cursor: pointer; z-index: 99; font-weight: bold; }
        input, textarea { width: 100%; padding: 14px; margin: 8px 0; border-radius: 10px; border: 1px solid #333; background: #0a1625; color: white; box-sizing: border-box; font-size: 16px; }
        .star-rating span { font-size: 30px; cursor: pointer; color: #333; }
        .star-rating span.active { color: var(--gold); }
    </style>
</head>
<body>

<div id="cart-btn" class="cart-float hidden" onclick="toggleModal('cart-modal', true)">üõí <span id="cart-count">0</span></div>

<div class="container">
    <div id="auth-screen">
        <h2 style="text-align:center; margin-top: 40px;">üå≤ –õ—ñ—Å–æ–≤–∞ –ü—ñ—Å–Ω—è</h2>
        <input type="email" id="email-input" placeholder="–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞">
        <input type="password" id="password-input" placeholder="–ü–∞—Ä–æ–ª—å">
        <button class="btn" onclick="signIn()">–£–í–Ü–ô–¢–ò</button>
    </div>

    <div id="main-app" class="hidden">
        <div class="news-bar">üì¢ <b>–ù–æ–≤–∏–Ω–∏:</b> <span id="news-text">...</span></div>

        <div class="user-card">
            <div id="user-rank" class="rank-badge">–ù–û–í–ê–ß–û–ö</div>
            <div style="font-size: 1.3rem; font-weight: bold; display: flex; justify-content: center; align-items: center; gap: 5px;">
                <span id="user-name">...</span>
                <span id="vip-icon" style="color:var(--gold); display:none;">‚≠ê VIP</span>
            </div>
            <div class="balance"><span id="user-balance">0</span> ‚Ç¥</div>
            <div style="color: #8899a6; font-size: 12px;">IDD: <span id="user-idd">...</span> | –í–∏—Ç—Ä–∞—á–µ–Ω–æ: <span id="user-spent">0</span> ‚Ç¥</div>
        </div>

        <button class="btn btn-blue" onclick="toggleModal('wheel-modal', true)">üé° –ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω–∏</button>
        <button class="btn" style="background: var(--gold); color: black;" onclick="usePromo()">üéÅ –ê–ö–¢–ò–í–£–í–ê–¢–ò –ü–†–û–ú–û–ö–û–î</button>
        <button class="btn btn-blue" onclick="visitForest()">üå≤ –í–Ü–î–í–Ü–î–ê–¢–ò –õ–Ü–° (23 ‚Ç¥)</button>
    
        <div class="section-header">ü™ô –ö—É–ø–∏—Ç–∏ –õ—ñ—Å–Ω–∏—á–∫–∏</div>
        <div style="background: rgba(255, 76, 76, 0.1); padding: 15px; border-radius: 15px; border: 1px solid var(--mono);">
            <p style="margin:0 0 10px; font-size: 0.9rem;">–ö—É—Ä—Å: <b id="current-rate">0.5</b> ‚Ç¥ –∑–∞ 1 üå≤</p>
            <input type="number" id="exchange-amount" placeholder="–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ª—ñ—Å–Ω–∏—á–∫—ñ–≤">
            <button class="btn btn-mono" onclick="buyCurrency()">–û–ü–õ–ê–¢–ò–¢–ò –ß–ï–†–ï–ó MONOBANK</button>
        </div>

        <div class="section-header">üí≥ –§—ñ–Ω–∞–Ω—Å–∏</div>
        <button class="btn btn-purple" onclick="toggleModal('transfer-modal', true)">üì≤ –ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –∑–∞–ø–∏—Ç</button>
        <button class="btn btn-gray" onclick="viewTransferRequests()">üì© –í—Ö—ñ–¥–Ω—ñ –∑–∞–ø–∏—Ç–∏</button>

        <div class="section-header">üçΩÔ∏è –ü–æ—Å–ª—É–≥–∏</div>
        <div id="services-list"></div>

        <div class="section-header">üî• –ö–∞–π—Ñ –∑–æ–Ω–∞ <span id="kz-status" style="color:var(--gold);">–í—ñ–ª—å–Ω–∏—Ö: ?</span></div>
        <div id="kz-list"></div>

        <div class="section-header">üí¨ –í—ñ–¥–≥—É–∫–∏</div>
        <button class="btn btn-blue" onclick="toggleModal('review-modal', true)">‚úçÔ∏è –ù–∞–ø–∏—Å–∞—Ç–∏ –≤—ñ–¥–≥—É–∫</button>
        <button class="btn btn-gray" onclick="loadReviews()">üìñ –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ</button>

        <button class="btn btn-gray" style="margin-top: 30px;" onclick="signOut()">–í–ò–ô–¢–ò</button>
    </div>
</div>

<div id="cart-modal" class="modal hidden">
    <div class="modal-content">
        <h3>–ú—ñ–π –ö–æ—à–∏–∫</h3>
        <div id="cart-items-list"></div>
        <hr border="0" style="border-top:1px solid #333; margin:15px 0;">
        <div style="display:flex; justify-content:space-between; font-weight:bold; margin-bottom:15px;">
            <span>–†–∞–∑–æ–º:</span> <span id="cart-total">0</span> ‚Ç¥
        </div>
        <button class="btn" onclick="checkoutCart()">–ö–£–ü–ò–¢–ò –í–°–ï</button>
        <button class="btn btn-gray" onclick="toggleModal('cart-modal', false)">–ó–ê–ö–†–ò–¢–ò</button>
    </div>
</div>

<div id="wheel-modal" class="modal hidden">
    <div class="modal-content" style="text-align:center;">
        <h3>üé° –ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω–∏</h3>
        <div id="wheel-result" style="font-size: 20px; margin: 20px 0; font-weight: bold;">?</div>
        <button id="spin-btn" class="btn btn-purple" onclick="spinWheel()">–ö–†–£–¢–ò–¢–ò</button>
        <button class="btn btn-gray" onclick="toggleModal('wheel-modal', false)">–ó–ê–ö–†–ò–¢–ò</button>
    </div>
</div>
<div id="review-modal" class="modal hidden">
    <div class="modal-content">
        <h3>–í—ñ–¥–≥—É–∫</h3>
        <div class="star-rating" id="star-input">
            <span onclick="setRating(1)">‚≠ê</span><span onclick="setRating(2)">‚≠ê</span><span onclick="setRating(3)">‚≠ê</span><span onclick="setRating(4)">‚≠ê</span><span onclick="setRating(5)">‚≠ê</span>
        </div>
        <textarea id="review-text" style="height:80px; margin-top:10px;" placeholder="–¢–µ–∫—Å—Ç –≤—ñ–¥–≥—É–∫—É..."></textarea>
        <button class="btn" onclick="sendReview()">–ù–ê–î–Ü–°–õ–ê–¢–ò</button>
        <button class="btn btn-gray" onclick="toggleModal('review-modal', false)">–ó–ê–ö–†–ò–¢–ò</button>
    </div>
</div>

<div id="reviews-list-modal" class="modal hidden"><div class="modal-content"><h3>–í—ñ–¥–≥—É–∫–∏</h3><div id="reviews-container"></div><button class="btn btn-gray" onclick="toggleModal('reviews-list-modal', false)">–ó–ê–ö–†–ò–¢–ò</button></div></div>
<div id="transfer-modal" class="modal hidden"><div class="modal-content"><h3>–ü–µ—Ä–µ–∫–∞–∑</h3><input type="number" id="target-idd" placeholder="IDD"><input type="number" id="transfer-amount" placeholder="–°—É–º–∞"><button class="btn" onclick="sendTransferRequest()">–ù–ê–î–Ü–°–õ–ê–¢–ò</button><button class="btn btn-gray" onclick="toggleModal('transfer-modal', false)">–ó–ê–ö–†–ò–¢–ò</button></div></div>
<div id="requests-list-modal" class="modal hidden"><div class="modal-content"><h3>–ó–∞–ø–∏—Ç–∏</h3><div id="requests-container"></div><button class="btn btn-gray" onclick="toggleModal('requests-list-modal', false)">–ó–ê–ö–†–ò–¢–ò</button></div></div>

<script src="script.js"></script>
</body>
</html>
