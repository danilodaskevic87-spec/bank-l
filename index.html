<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ—ñ—Å–æ–≤–∞ –ü—ñ—Å–Ω—è - –ü–æ–≤–Ω–∏–π –î–æ–¥–∞—Ç–æ–∫</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root { --bg: #010811; --card: #05111f; --green: #2ecc71; --white: #fff; --blue: #3498db; --purple: #9b59b6; --gold: #f1c40f; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--white); margin: 0; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 450px; padding: 20px; box-sizing: border-box; }
        .hidden { display: none !important; }
        .btn { width: 100%; padding: 16px; margin-bottom: 10px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; background: var(--green); color: #000; font-size: 16px; transition: 0.2s; }
        .btn:active { transform: scale(0.98); }
        .btn-blue { background: var(--blue) !important; color: white !important; }
        .btn-purple { background: var(--purple) !important; color: white !important; }
        .btn-gray { background: #34495e !important; color: white !important; }
        .user-card { background: var(--card); padding: 25px; border-radius: 20px; text-align: center; border: 1px solid #1e2d3d; margin-bottom: 20px; }
        .balance { font-size: 38px; color: var(--green); font-weight: bold; margin: 10px 0; }
        .vip-badge { color: var(--gold); font-weight: bold; margin-left: 8px; display: none; }
        .section-header { font-size: 18px; margin: 25px 0 15px; font-weight: bold; border-left: 4px solid var(--green); padding-left: 10px; }
        input, textarea { width: 100%; padding: 14px; margin: 8px 0; border-radius: 10px; border: 1px solid #333; background: #0a1625; color: white; box-sizing: border-box; font-size: 16px; font-family: inherit; }
        .exchange-box { background: rgba(155, 89, 182, 0.1); padding: 15px; border-radius: 15px; border: 1px solid var(--purple); margin-bottom: 20px; }
        .modal { background: rgba(0,0,0,0.9); position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index: 100; }
        .modal-content { background: var(--card); padding: 25px; border-radius: 20px; width: 90%; max-width: 400px; border: 1px solid var(--green); max-height: 80vh; overflow-y: auto; }
        .request-item { background: #0d1b2a; padding: 15px; border-radius: 12px; margin-bottom: 10px; border: 1px solid #1e2d3d; }
    </style>
</head>
<body>

<div class="container">
    <div id="auth-screen">
        <h2 style="text-align:center; margin-top: 40px;">üå≤ –õ—ñ—Å–æ–≤–∞ –ü—ñ—Å–Ω—è</h2>
        <input type="email" id="email-input" placeholder="–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞">
        <input type="password" id="password-input" placeholder="–ü–∞—Ä–æ–ª—å">
        <button class="btn" onclick="signIn()">–£–í–Ü–ô–¢–ò</button>
    </div>

    <div id="main-app" class="hidden">
        <div class="user-card">
            <div style="font-size: 1.3rem; font-weight: bold; display: flex; justify-content: center; align-items: center;">
                <span id="user-name">...</span>
                <span id="vip-icon" class="vip-badge">‚≠ê VIP</span>
            </div>
            <div class="balance"><span id="user-balance">0</span> ‚Ç¥</div>
            <div style="color: #8899a6;">IDD: <span id="user-idd">...</span></div>
        </div>

        <div class="section-header">ü™ô –ö—É–ø–∏—Ç–∏ –õ—ñ—Å–Ω–∏—á–∫–∏</div>
        <div class="exchange-box">
            <p style="margin-top:0; font-size: 0.9rem;">–í–∞—à –∫—É—Ä—Å: <b id="current-rate">0.5</b> ‚Ç¥ –∑–∞ 1 üå≤</p>
            <input type="number" id="exchange-amount" placeholder="–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ª—ñ—Å–Ω–∏—á–∫—ñ–≤">
            <button class="btn btn-purple" onclick="buyCurrency()">–û–ü–õ–ê–¢–ò–¢–ò</button>
        </div>

        <div class="section-header">üí≥ –§—ñ–Ω–∞–Ω—Å–∏</div>
        <button class="btn btn-purple" onclick="toggleModal('transfer-modal', true)">üì≤ –ó–∞–ø–∏—Ç –Ω–∞ –ø–µ—Ä–µ–∫–∞–∑</button>
        <button class="btn btn-gray" onclick="viewTransferRequests()">üì© –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–∞–ø–∏—Ç–∏</button>

        <div class="section-header">üçΩÔ∏è –ü–æ—Å–ª—É–≥–∏</div>
        <button class="btn" onclick="processOrder('üçî –á–∂–∞', 10)">üçî –á–∂–∞ ‚Äî 10 ‚Ç¥</button>
        <button class="btn" onclick="processOrder('üíß –í–æ–¥–∞', 5)">üíß –í–æ–¥–∞ ‚Äî 5 ‚Ç¥</button>
        <button class="btn" onclick="processOrder('ü•§ –ö–æ–ª–∞', 12)">ü•§ –ö–æ–ª–∞ ‚Äî 12 ‚Ç¥</button>
        <button class="btn" onclick="processOrder('üç¨ –¶—É–∫–µ—Ä–∫–∞', 3)">üç¨ –¶—É–∫–µ—Ä–∫–∞ ‚Äî 3 ‚Ç¥</button>
        <button class="btn" onclick="processOrder('üçå –ë–∞–Ω–∞–Ω', 7)">üçå –ë–∞–Ω–∞–Ω ‚Äî 7 ‚Ç¥</button>
        <button class="btn" onclick="processOrder('üçä –ú–∞–Ω–¥–∞—Ä–∏–Ω–∏', 8)">üçä –ú–∞–Ω–¥–∞—Ä–∏–Ω–∏ ‚Äî 8 ‚Ç¥</button>

        <div class="section-header">üî• –ö–∞–π—Ñ –∑–æ–Ω–∞ (–í—ñ–ª—å–Ω–∏—Ö: <span id="kz-slots-display">?</span>)</div>
        <button class="btn" onclick="processOrder('ü™ë 1 –º—ñ—Å—Ü–µ', 60)">ü™ë 1 –º—ñ—Å—Ü–µ ‚Äî 60 ‚Ç¥</button>
        <button class="btn" onclick="processOrder('üï∂Ô∏è –ö–∞–π—Ñ+', 120)">üï∂Ô∏è –ø—Ä–∏–Ω–µ—Å—Ç–∏ –∑ –∫—É—Ö–Ω—ñ ‚Äî 120 ‚Ç¥</button>

        <div class="section-header">üèÜ –°–µ—Ä–≤—ñ—Å–∏</div>
        <button class="btn" onclick="processOrder('üíÜ –ú–∞—Å–∞–∂', 150)">üíÜ –ú–∞—Å–∞–∂ ‚Äî 150 ‚Ç¥</button>
        <button class="btn" onclick="processOrder('–Ω–æ–º–µ—Ä', 300)">–Ω–æ–º–µ—Ä ‚Äî 300 ‚Ç¥</button>
        <button class="btn" onclick="processOrder('—Ç—Ä–µ–Ω–∞–∂–µ—Ä', 250)">—Ç—Ä–µ–Ω–∞–∂–µ—Ä ‚Äî 250 ‚Ç¥</button>

        <div class="section-header">üí¨ –í—ñ–¥–≥—É–∫–∏</div>
        <button class="btn btn-blue" onclick="toggleModal('review-modal', true)">‚úçÔ∏è –ó–∞–ª–∏—à–∏—Ç–∏ –≤—ñ–¥–≥—É–∫</button>
        <button class="btn btn-gray" onclick="loadReviews()">üìñ –ß–∏—Ç–∞—Ç–∏ –≤—ñ–¥–≥—É–∫–∏</button>

        <button class="btn btn-gray" style="margin-top: 30px;" onclick="signOut()">–í–ò–ô–¢–ò</button>
    </div>
</div>

<div id="review-modal" class="modal hidden">
    <div class="modal-content">
        <h3>–í–∞—à –≤—ñ–¥–≥—É–∫</h3>
        <textarea id="review-text" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å —â–æ—Å—å –ø—Ä–∏—î–º–Ω–µ..."></textarea>
        <button class="btn" style="margin-top:10px;" onclick="sendReview()">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
        <button class="btn btn-gray" onclick="toggleModal('review-modal', false)">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
</div>

<div id="reviews-list-modal" class="modal hidden">
    <div class="modal-content">
        <h3>–í—ñ–¥–≥—É–∫–∏ –≥–æ—Å—Ç–µ–π</h3>
        <div id="reviews-container"></div>
        <button class="btn btn-gray" onclick="toggleModal('reviews-list-modal', false)">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
</div>

<div id="transfer-modal" class="modal hidden">
    <div class="modal-content">
        <h3>–ó–∞–ø–∏—Ç –Ω–∞ –ø–µ—Ä–µ–∫–∞–∑</h3>
        <input type="number" id="target-idd" placeholder="IDD –æ—Ç—Ä–∏–º—É–≤–∞—á–∞">
        <input type="number" id="transfer-amount" placeholder="–°—É–º–∞ ‚Ç¥">
        <button class="btn" onclick="sendTransferRequest()">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
        <button class="btn btn-gray" onclick="toggleModal('transfer-modal', false)">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
</div>

<div id="requests-list-modal" class="modal hidden">
    <div class="modal-content">
        <h3>–í—Ö—ñ–¥–Ω—ñ –∑–∞–ø–∏—Ç–∏</h3>
        <div id="requests-container"></div>
        <button class="btn btn-gray" onclick="toggleModal('requests-list-modal', false)">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
